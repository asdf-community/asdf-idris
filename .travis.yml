sudo: true
language: c

matrix:
  include:
    - os: linux
      dist: xenial
      sudo: required
    - os: osx

before_script:
  - git clone https://github.com/asdf-vm/asdf.git
  - . asdf/asdf.sh
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then brew install cabal-install; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo apt-get install cabal-install; fi
  - |
    if [ "$TRAVIS_OS_NAME" == "linux" ]; then
      cabal update
      cabal install --verbose=0 cabal-install
    fi

script:
  - export PATH=$HOME/.cabal/bin:$PATH
  - which cabal
  - cabal --version
  - asdf plugin-test idris https://github.com/vic/asdf-idris.git 'idris --help'

