sudo: true
language: c
os:
  - linux
  - osx

before_script:
  - git clone https://github.com/asdf-vm/asdf.git
  - . asdf/asdf.sh
  - if [ "$(uname -s)" == "Darwin" ]; then brew install cabal-install; fi
  - if [ "$(uname -s)" == "Linux" ]; then sudo apt-get install cabal-install; fi
  - |
    if [ "$(uname -s)" == "Linux" ]; then
      cabal update
      cabal install --verbose=0 cabal-install
    fi

script:
  - export PATH=$HOME/.cabal/bin:$PATH
  - which cabal
  - cabal --version
  - asdf plugin-test idris https://github.com/vic/asdf-idris.git 'idris --help'

